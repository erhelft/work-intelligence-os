---
alwaysApply: false
---
## Purpose

Formatting and style conventions for workflows. This document covers **how** to format content; for workflow **structure** (what sections, in what order), see `workflow-template.md`.

## Core Principle

Every workflow is a contract between user and AI: what goes in, what happens, what comes out, and how to know it worked.

---

## Formatting Conventions

### Gates

Gates are user approval points. Format them consistently:

```markdown
**Gate:** User confirms [specific decision or approval]
```

**Rules:**
- Be specific about what user is approving
- Place at natural decision points (phase transitions, before proceeding)
- Aim for 3-5 gates per workflow (enough control, not too slow)

**Good examples:**
- `**Gate:** User confirms context is captured`
- `**Gate:** User approves configuration and outline before generation`
- `**Gate:** User approves final specification for handoff`

**Bad examples:**
- `**Gate:** User confirms` (too vague)
- `**Gate:** Done` (not a decision)

### Checkboxes & Fill-in-the-Blank

Use checkboxes for tracking prerequisites and outputs:

```markdown
**Required:**
- [ ] Context document: _______
- [ ] File path: _______

**This Workflow Will Produce:**
- [ ] File: `output-[name].md`
- [ ] Location: _______
```

**Rules:**
- Use `- [ ]` for items that need tracking
- Use `_______` for fill-in-the-blank fields
- Group related items under clear headings

### Step Format

Steps should follow this format:

```markdown
### Step N: [Step Name]

**Objective:** [Single sentence — what this step achieves]

**LLM Actions:**
[What to do — questions to ask, information to gather, how to approach]

**Key Topics to Cover:**
- [Topic 1]
- [Topic 2]

**Quality Check:**
- [ ] [Criterion 1]
- [ ] [Criterion 2]

**Gate:** [What user approves — or "No gate, continue"]
```

**Rules:**
- Each step has a single objective
- Use "LLM Actions" (not "Activities") for consistency
- Include Quality Check for validation criteria
- End with explicit Gate or "No gate — proceed to Step N"

### File Naming

Use consistent naming patterns:

**Workflows:**
- Format: `workflow-name-descriptor.md`
- Example: `agent-spec-workflow.md`

**Workflow outputs:**
- Format: `output-type-[identifier].md`
- Example: `agent-spec-scheduling-assistant.md`

**Date-specific outputs:**
- Include date: `summary-2025-01-15.md`

**Rules:**
- Use kebab-case (hyphens, not underscores)
- Include identifier when multiple instances exist
- Include date when output is point-in-time

---

## Additional Sections (Not in Template)

These sections appear in some workflows but aren't part of the standard template. Include when applicable.

### Chat Management

**When to include:** Workflows that load large external data (API responses, web scraping) or produce token-heavy outputs.

**When to skip:** Lightweight workflows, thinking/dialogue workflows, or workflows that benefit from accumulated context.

**Decision criteria:**
- Include if: External data per execution > 10,000 tokens OR workflow generates files > 5,000 tokens each
- Include if: Multiple independent units of work that don't need cross-context
- Skip if: Iterative thinking requiring conversation history OR comparative analysis needing multiple items in context

**Format for data-heavy workflows:**
```markdown
## Chat Management

**Start a fresh conversation for each [unit of work].**

**Why:** [Brief explanation of token impact]

**Before starting:**
* Verify clean chat (no previous [work] in context)
* If conversation contains [previous work], start new chat
* Exception: [Any cases where batching makes sense]
```

### Tools

**When to include:** Workflows that require external tools or services.

```markdown
## Tools

**Required:**
- [Tool name] — [what it's used for]

**Optional:**
- [Tool name] — [what it enhances]
```

---

## Workflow Design Principles

### 1. Single Responsibility
- Each workflow should do one thing well
- If workflow has multiple distinct outcomes, consider splitting

### 2. Clear Handoffs
- Workflows that connect must specify handoff format
- Downstream workflows should reference (not duplicate) upstream work
- Use "From [Previous Workflow]" sections to carry context forward

### 3. User Control Points
- Gate at decisions, not every action
- Gate when switching phases (intake → execution → review)
- Gate when user input is needed to proceed
- Default to 3-5 gates per workflow

### 4. State Tracking
- Use checkboxes for prerequisite tracking
- Use fill-in-the-blank fields for paths and parameters
- Make it easy to see what's been completed

---

## Validation Checklist

Before finalizing a workflow, verify against `workflow-template.md` structure:

**Structure (from template):**
- [ ] Has all required sections: Purpose, Goal, For Humans, Workflow Process, LLM Instructions, Prerequisites & Setup, Workflow Steps, Success Criteria
- [ ] Conditional sections included where applicable: Reference Material, Output Specification, Next Steps
- [ ] Section order matches template

**Formatting (from this document):**
- [ ] Purpose is single sentence, action-focused
- [ ] Prerequisites use checkboxes and fill-in-the-blank fields
- [ ] Goal describes outcome, not process
- [ ] Steps use consistent format (Objective, LLM Actions, Quality Check, Gate)
- [ ] Gates are explicit with "**Gate:**" format
- [ ] Gates number between 3-5 (not too few, not too many)
- [ ] Output specification includes file naming, contents, and location
- [ ] Success criteria has 4-7 measurable outcomes
- [ ] File naming follows kebab-case convention

---

## When to Deviate from Template

### Thinking/Dialogue Workflows
**May simplify:**
- Prerequisites section if no inputs required
- Output section if no artifacts produced

**Must keep:**
- Explicit gating with "**Gate:**" statements
- Success Criteria section
- Goal section

### Simple Workflows
- May combine sections if workflow is straightforward
- Must maintain core structure (Purpose, Goal, Steps with Gates, Success Criteria)

### Experimental Workflows
- May use "Draft" label at top of file
- Document deviations from standard format

**Rule:** If deviating from template, state why at the top of the workflow file.

---

## Cross-Reference

- **workflow-template.md** — Workflow structure and sections
- **document-formatting.mdc** — General markdown formatting rules
